---
name: ansible-content-action
description: This is a monolithic action for Ansible contnet testing
author: Sagar Paul
inputs:
  ansible_galaxy_api_key: # string
    description: "The Galaxy api key"
    required: false
runs:
  using: composite
  steps:
    # run ansible-lint
    - name: Run ansible-lint
      if: ${{ github.job == 'ansible-lint' }}
      uses: KB-perByte/ansible-content-action/.github/actions/ansible-lint@main

    # run sanity with declared matrix
    - name: Run sanity
      if: ${{ github.job == 'sanity' }}
      uses: KB-perByte/ansible-content-action/.github/actions/sanity@main

    # run release galaxy on event publish
    - name: Release Galaxy"
      if: ${{ github.event == 'published' }}
      uses: KB-perByte/ansible-content-action/.github/actions/release-galaxy@main
      with:
        ansible_galaxy_api_key: ${{ inputs.ansible_galaxy_api_key }}
